import{p as a}from"./index-DX-5XR_r.js";const n="http://localhost:5000/api",s=a.create({baseURL:n,timeout:15e3,headers:{"Content-Type":"application/json"},withCredentials:!0});s.interceptors.request.use(e=>{const t=localStorage.getItem("token")||sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));s.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response?.status===401&&!t._retry&&localStorage.getItem("refreshToken")){t._retry=!0;try{const o=localStorage.getItem("refreshToken"),r=(await a.post(`${n}/auth/refresh`,{refreshToken:o})).data?.accessToken;if(r)return localStorage.setItem("token",r),t.headers.Authorization=`Bearer ${r}`,s(t)}catch(o){console.error("üîí Token refresh failed:",o),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"}}return console.error("‚ùå API Error:",e.response?.data||e.message),Promise.reject(e)});export{s as a};
