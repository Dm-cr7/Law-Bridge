import{j as e,m as y,n as f,r as x,F as v,B as k}from"./index-DX-5XR_r.js";import{I as g}from"./Input-BOJvGKkg.js";import{S as N,a as R,b as C,c as D,d as b}from"./Select-BN-5Xd7q.js";import{A as S}from"./arrow-up-right-Bba4g6iv.js";import{A,C as j}from"./chart-column-_z7RLHED.js";import{a as w}from"./axiosInstance-QS7N9QFl.js";import{t as a}from"./use-toast-BzRUQ8M6.js";import{R as E}from"./refresh-ccw-Dbz6RysH.js";import{D as F}from"./download-DmMTyFAX.js";import"./chevron-down-DBqW3GSb.js";const U=({title:s,value:p,icon:o,change:d,changeType:l="neutral",description:m,isLoading:c=!1,color:r="blue"})=>{const h={blue:"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20",green:"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",red:"from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20",yellow:"from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20",purple:"from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",black:"from-black-50 to-black-100 dark:from-black-900/20 dark:to-black-800/20"},t=l==="increase"?"text-green-600 dark:text-green-400":l==="decrease"?"text-red-600 dark:text-red-400":"text-black-500 dark:text-black-400";return e.jsxs(y.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.3},className:f("p-5 rounded-2xl shadow-sm border border-black-200 dark:border-black-800 bg-gradient-to-br transition-all duration-300 hover:shadow-lg hover:border-black-300 dark:hover:border-black-700",h[r]),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-sm font-semibold text-black-600 dark:text-black-400",children:s})}),o&&e.jsx("div",{className:f("p-2 rounded-lg bg-white/70 dark:bg-black-900/40 shadow-sm",r.startsWith("blue")?"text-blue-500":r.startsWith("green")?"text-green-500":r.startsWith("red")?"text-red-500":r.startsWith("yellow")?"text-yellow-500":r.startsWith("purple")?"text-purple-500":"text-black-500"),children:e.jsx(o,{size:20})})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[c?e.jsx("div",{className:"h-7 w-24 bg-black-200 dark:bg-black-700 animate-pulse rounded-md"}):e.jsx("p",{className:"text-3xl font-bold text-black-900 dark:text-black-100",children:p}),d&&e.jsxs("div",{className:f("flex items-center text-sm font-medium",t),children:[l==="increase"&&e.jsx(S,{size:16,className:"mr-1"}),l==="decrease"&&e.jsx(A,{size:16,className:"mr-1"}),d]})]}),m&&e.jsx("p",{className:"text-xs text-black-500 dark:text-black-400 mt-2",children:m})]})};function O(){const[s,p]=x.useState({type:"",startDate:"",endDate:""}),[o,d]=x.useState(!1),[l,m]=x.useState([]),c=(t,i)=>{p(u=>({...u,[t]:i}))},r=async()=>{try{d(!0);const{data:t}=await w.get("/api/reports",{params:s});m(t||[]),a.success("Reports fetched successfully!")}catch(t){console.error(t),a.error("Failed to load reports. Please try again.")}finally{d(!1)}},h=async()=>{if(!s.type){a.error("Please select a report type first.");return}try{a.loading("Generating report...");const t=await w.get("/api/reports/download",{params:s,responseType:"blob"}),i=new Blob([t.data],{type:"application/pdf"}),u=window.URL.createObjectURL(i),n=document.createElement("a");n.href=u,n.setAttribute("download",`report_${s.type}_${Date.now()}.pdf`),document.body.appendChild(n),n.click(),n.remove(),a.dismiss(),a.success("Report downloaded successfully!")}catch(t){console.error(t),a.dismiss(),a.error("Error downloading the report. Try again.")}};return x.useEffect(()=>{r()},[]),e.jsxs("div",{className:"p-6 md:p-10 bg-black-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-black-800",children:"Reports Dashboard"})]}),e.jsxs(k,{onClick:r,disabled:o,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(E,{className:"w-4 h-4"}),o?"Loading...":"Refresh"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm grid grid-cols-1 md:grid-cols-4 gap-4 mb-10",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black-600 mb-1 block",children:"Report Type"}),e.jsxs(N,{value:s.type,onChange:t=>c("type",t),children:[e.jsx(R,{children:e.jsx(C,{placeholder:"Select Type"})}),e.jsxs(D,{children:[e.jsx(b,{value:"cases",children:"Cases"}),e.jsx(b,{value:"users",children:"Users"}),e.jsx(b,{value:"arbitrations",children:"Arbitrations"}),e.jsx(b,{value:"payments",children:"Payments"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black-600 mb-1 block",children:"Start Date"}),e.jsx(g,{type:"date",value:s.startDate,onChange:t=>c("startDate",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-black-600 mb-1 block",children:"End Date"}),e.jsx(g,{type:"date",value:s.endDate,onChange:t=>c("endDate",t.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(k,{onClick:h,disabled:o,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white w-full",children:[e.jsx(F,{className:"w-4 h-4"}),"Download Report"]})})]}),l.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map((t,i)=>e.jsx(U,{title:t.title||"Untitled Report",value:t.count||0,icon:j,color:"blue"},i))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-black-500",children:[e.jsx(j,{className:"w-10 h-10 mb-4 text-black-400"}),e.jsx("p",{children:"No reports found. Adjust your filters or refresh."})]})]})}export{O as default};
