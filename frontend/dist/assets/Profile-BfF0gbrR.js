import{c as f,b,r as d,j as e,d as g,m as v}from"./index-f8gYbhCl.js";import{a as r}from"./api-BYptnXG6.js";import{t as m}from"./index-Cne2OvF7.js";import{U as N}from"./user-CmGx6MMi.js";import{S as y}from"./save-CpWo0CdF.js";import"./index-Dgkh_OCz.js";/**
 * @license lucide-react v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],w=f("shield",C);function T(){const{user:S,setUser:p}=b(),[s,n]=d.useState(null),[h,x]=d.useState(!0),[c,u]=d.useState(!1),[a,o]=d.useState(null);d.useEffect(()=>{(async()=>{try{x(!0);const{data:i}=await r.get("/users/me");if(n(i),i.role==="Advocate"){const t=await r.get("/cases/stats?role=advocate");o(t.data)}else if(i.role==="Paralegal"){const t=await r.get("/tasks/stats?role=paralegal");o(t.data)}else if(i.role==="Arbitrator"){const t=await r.get("/disputes/stats?role=arbitrator");o(t.data)}else if(i.role==="Reconciliator"){const t=await r.get("/sessions/stats?role=reconciliator");o(t.data)}else if(i.role==="Admin"){const t=await r.get("/analytics/system-summary");o(t.data)}}catch(i){console.error("Failed to fetch profile:",i),m.error("Could not load profile data")}finally{x(!1)}})()},[]);const j=async()=>{try{u(!0);const{data:l}=await r.put("/users/me",s);p(l),m.success("Profile updated successfully!")}catch(l){console.error("Save failed:",l),m.error("Failed to update profile")}finally{u(!1)}};return h?e.jsxs("div",{className:"flex justify-center items-center h-[70vh] text-slate-600",children:[e.jsx(g,{className:"animate-spin mr-2"})," Loading profile..."]}):s?e.jsx("div",{className:"profile-page min-h-screen bg-black-50 py-10 px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-md rounded-xl p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 border-b pb-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:e.jsx(N,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:s.name||"Unnamed User"}),e.jsxs("p",{className:"text-slate-500 text-sm flex items-center gap-2",children:[e.jsx(w,{size:14})," ",s.role]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:s.name||"",onChange:l=>n({...s,name:l.target.value}),className:"w-full border border-slate-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:s.email||"",onChange:l=>n({...s,email:l.target.value}),className:"w-full border border-slate-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:s.phone||"",onChange:l=>n({...s,phone:l.target.value}),className:"w-full border border-slate-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Organization"}),e.jsx("input",{type:"text",value:s.organization||"",onChange:l=>n({...s,organization:l.target.value}),className:"w-full border border-slate-300 rounded-md px-3 py-2"})]})]}),a&&e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-slate-50 rounded-lg p-6 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-3",children:[s.role," Overview"]}),s.role==="Advocate"&&e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("li",{children:["Active Cases: ",a.activeCases||0]}),e.jsxs("li",{children:["Completed Cases: ",a.completed||0]}),e.jsxs("li",{children:["Pending Documents: ",a.documentsPending||0]}),e.jsxs("li",{children:["Reports Generated: ",a.reportsGenerated||0]})]}),s.role==="Paralegal"&&e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("li",{children:["Tasks Assigned: ",a.assignedTasks||0]}),e.jsxs("li",{children:["Cases Filed: ",a.casesFiled||0]}),e.jsxs("li",{children:["Client Intakes: ",a.clientIntakes||0]})]}),s.role==="Arbitrator"&&e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("li",{children:["Disputes Resolved: ",a.resolved||0]}),e.jsxs("li",{children:["Pending Hearings: ",a.pendingHearings||0]}),e.jsxs("li",{children:["Closed Cases: ",a.closed||0]})]}),s.role==="Reconciliator"&&e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("li",{children:["Sessions Handled: ",a.sessions||0]}),e.jsxs("li",{children:["Parties Reconciled: ",a.reconciled||0]}),e.jsxs("li",{children:["Pending Sessions: ",a.pending||0]})]}),s.role==="Admin"&&e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("li",{children:["Total Users: ",a.users||0]}),e.jsxs("li",{children:["Total Cases: ",a.cases||0]}),e.jsxs("li",{children:["Total Tasks: ",a.tasks||0]}),e.jsxs("li",{children:["System Uptime: ",a.uptime||"N/A"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:j,disabled:c,className:`inline-flex items-center gap-2 px-5 py-2 rounded-md ${c?"bg-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:[c?e.jsx(g,{className:"animate-spin",size:16}):e.jsx(y,{size:16}),"Save Changes"]})})]})}):e.jsx("div",{className:"p-6 text-red-600",children:"Unable to load profile"})}export{T as default};
