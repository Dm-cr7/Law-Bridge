import{k as F,u as D,r,j as e,d as p,B as l,F as g,n as c}from"./index-f8gYbhCl.js";import{C as d,a as o,b as x,c as m}from"./Card-RIMQGzKH.js";import{n}from"./index-BggV2thh.js";import{F as k}from"./file-down-04MLR8_x.js";import{R as P}from"./refresh-ccw-ClALOjYv.js";const h="/api";function B(){const{id:t}=F(),w=D(),[b,N]=r.useState(!0),[s,v]=r.useState(null),[j,y]=r.useState([]),[f,u]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const[i,C]=await Promise.all([c.get(`${h}/arbitrations/${t}`),c.get(`${h}/evidence/by-arbitration/${t}`)]);v(i.data),y(C.data||[])}catch(i){console.error("Failed to fetch arbitration details:",i),n.error("Failed to load arbitration details")}finally{N(!1)}})()},[t]);const A=async()=>{if(t)try{u(!0);const a=await c.post(`${h}/awards/generate/${t}`);a.data?.message?n.success(a.data.message):n.success("Award generation started")}catch(a){console.error("Error triggering award PDF:",a),n.error("Failed to trigger award PDF generation")}finally{u(!1)}};return b?e.jsxs("div",{className:"flex h-80 items-center justify-center",children:[e.jsx(p,{className:"animate-spin mr-2"}),e.jsx("span",{children:"Loading arbitration details..."})]}):s?e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Arbitration Case #",s._id.slice(-6)]}),e.jsx(l,{variant:"secondary",onClick:()=>w(-1),children:"← Back"})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{children:"Case Overview"})}),e.jsxs(m,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",s.title||"Untitled"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:`${s.status==="closed"?"text-green-600":"text-yellow-600"} font-medium`,children:s.status})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Filed On:"})," ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Arbitrator:"})," ",s.arbitrator?.name||"Unassigned"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Claimant:"})," ",s.claimant?.name||"N/A"," (",s.claimant?.email||"—",")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Respondent:"})," ",s.respondent?.name||"N/A"," (",s.respondent?.email||"—",")"]})]})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{children:"Evidence"})}),e.jsx(m,{children:j.length===0?e.jsx("p",{className:"text-black-500 text-sm",children:"No evidence uploaded yet."}):e.jsx("ul",{className:"divide-y divide-black-200",children:j.map(a=>e.jsxs("li",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:a.filename})]}),e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Download"]})]},a._id))})})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(x,{children:"Award Document"})}),e.jsx(m,{children:s.awardPdf?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("a",{href:s.awardPdf,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"View Award PDF"]}),e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),"Refresh"]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-black-500 text-sm",children:"No award PDF generated yet."}),e.jsx(l,{onClick:A,disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):"Generate Award PDF"})]})})]})]}):e.jsx("div",{className:"text-center text-black-500 mt-10",children:"⚠️ Arbitration not found."})}export{B as default};
