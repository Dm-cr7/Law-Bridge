import{k as $e,r as h,b as Ke,j as r,e as V,c as ve,w as Je,m as Y,t as R,X as Qe,d as M}from"./index-DX-5XR_r.js";import{u as ge}from"./index.esm-BEqESI9Z.js";import{a as xe,o as _e,s as L,l as te}from"./schemas-CQTzvhsC.js";import{C as we,S as be}from"./shield-tyGOXVQm.js";import{S as et}from"./save-efY_ys2Y.js";import{C as tt}from"./check-DiMJEtlw.js";import{D as rt}from"./download-DmMTyFAX.js";var se=function(a,n){return se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},se(a,n)};function ot(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");se(a,n);function e(){this.constructor=a}a.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var N=function(){return N=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},N.apply(this,arguments)};var re,ye;function nt(){if(ye)return re;ye=1;var a=!1,n,e,t,o,i,s,c,l,d,p,x,v,w,y,E;function g(){if(!a){a=!0;var S=navigator.userAgent,C=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(S),F=/(Mac OS X)|(Windows)|(Linux)/.exec(S);if(v=/\b(iPhone|iP[ao]d)/.exec(S),w=/\b(iP[ao]d)/.exec(S),p=/Android/i.exec(S),y=/FBAN\/\w+;/i.exec(S),E=/Mobile/i.exec(S),x=!!/Win64/.exec(S),C){n=C[1]?parseFloat(C[1]):C[5]?parseFloat(C[5]):NaN,n&&document&&document.documentMode&&(n=document.documentMode);var O=/(?:Trident\/(\d+.\d+))/.exec(S);s=O?parseFloat(O[1])+4:n,e=C[2]?parseFloat(C[2]):NaN,t=C[3]?parseFloat(C[3]):NaN,o=C[4]?parseFloat(C[4]):NaN,o?(C=/(?:Chrome\/(\d+\.\d+))/.exec(S),i=C&&C[1]?parseFloat(C[1]):NaN):i=NaN}else n=e=t=i=o=NaN;if(F){if(F[1]){var A=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(S);c=A?parseFloat(A[1].replace("_",".")):!0}else c=!1;l=!!F[2],d=!!F[3]}else c=l=d=!1}}var z={ie:function(){return g()||n},ieCompatibilityMode:function(){return g()||s>n},ie64:function(){return z.ie()&&x},firefox:function(){return g()||e},opera:function(){return g()||t},webkit:function(){return g()||o},safari:function(){return z.webkit()},chrome:function(){return g()||i},windows:function(){return g()||l},osx:function(){return g()||c},linux:function(){return g()||d},iphone:function(){return g()||v},mobile:function(){return g()||v||w||p||E},nativeApp:function(){return g()||y},android:function(){return g()||p},ipad:function(){return g()||w}};return re=z,re}var oe,Ce;function it(){if(Ce)return oe;Ce=1;var a=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:a,canUseWorkers:typeof Worker<"u",canUseEventListeners:a&&!!(window.addEventListener||window.attachEvent),canUseViewport:a&&!!window.screen,isInWorker:!a};return oe=n,oe}var ne,je;function at(){if(je)return ne;je=1;var a=it(),n;a.canUseDOM&&(n=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function e(t,o){if(!a.canUseDOM||o&&!("addEventListener"in document))return!1;var i="on"+t,s=i in document;if(!s){var c=document.createElement("div");c.setAttribute(i,"return;"),s=typeof c[i]=="function"}return!s&&n&&t==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}return ne=e,ne}var ie,Se;function st(){if(Se)return ie;Se=1;var a=nt(),n=at(),e=10,t=40,o=800;function i(s){var c=0,l=0,d=0,p=0;return"detail"in s&&(l=s.detail),"wheelDelta"in s&&(l=-s.wheelDelta/120),"wheelDeltaY"in s&&(l=-s.wheelDeltaY/120),"wheelDeltaX"in s&&(c=-s.wheelDeltaX/120),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(c=l,l=0),d=c*e,p=l*e,"deltaY"in s&&(p=s.deltaY),"deltaX"in s&&(d=s.deltaX),(d||p)&&s.deltaMode&&(s.deltaMode==1?(d*=t,p*=t):(d*=o,p*=o)),d&&!c&&(c=d<1?-1:1),p&&!l&&(l=p<1?-1:1),{spinX:c,spinY:l,pixelX:d,pixelY:p}}return i.getEventType=function(){return a.firefox()?"DOMMouseScroll":n("wheel")?"wheel":"mousewheel"},ie=i,ie}var ae,Ne;function ct(){return Ne||(Ne=1,ae=st()),ae}var lt=ct();const dt=$e(lt);function ut(a,n,e,t,o,i){i===void 0&&(i=0);var s=W(a,n,i),c=s.width,l=s.height,d=Math.min(c,e),p=Math.min(l,t);return d>p*o?{width:p*o,height:p}:{width:d,height:d/o}}function pt(a){return a.width>a.height?a.width/a.naturalWidth:a.height/a.naturalHeight}function q(a,n,e,t,o){o===void 0&&(o=0);var i=W(n.width,n.height,o),s=i.width,c=i.height;return{x:Re(a.x,s,e.width,t),y:Re(a.y,c,e.height,t)}}function Re(a,n,e,t){var o=n*t/2-e/2;return K(a,-o,o)}function Ee(a,n){return Math.sqrt(Math.pow(a.y-n.y,2)+Math.pow(a.x-n.x,2))}function Pe(a,n){return Math.atan2(n.y-a.y,n.x-a.x)*180/Math.PI}function ht(a,n,e,t,o,i,s){i===void 0&&(i=0),s===void 0&&(s=!0);var c=s?mt:ft,l=W(n.width,n.height,i),d=W(n.naturalWidth,n.naturalHeight,i),p={x:c(100,((l.width-e.width/o)/2-a.x/o)/l.width*100),y:c(100,((l.height-e.height/o)/2-a.y/o)/l.height*100),width:c(100,e.width/l.width*100/o),height:c(100,e.height/l.height*100/o)},x=Math.round(c(d.width,p.width*d.width/100)),v=Math.round(c(d.height,p.height*d.height/100)),w=d.width>=d.height*t,y=w?{width:Math.round(v*t),height:v}:{width:x,height:Math.round(x/t)},E=N(N({},y),{x:Math.round(c(d.width-y.width,p.x*d.width/100)),y:Math.round(c(d.height-y.height,p.y*d.height/100))});return{croppedAreaPercentages:p,croppedAreaPixels:E}}function mt(a,n){return Math.min(a,Math.max(0,n))}function ft(a,n){return n}function vt(a,n,e,t,o,i){var s=W(n.width,n.height,e),c=K(t.width/s.width*(100/a.width),o,i),l={x:c*s.width/2-t.width/2-s.width*c*(a.x/100),y:c*s.height/2-t.height/2-s.height*c*(a.y/100)};return{crop:l,zoom:c}}function gt(a,n,e){var t=pt(n);return e.height>e.width?e.height/(a.height*t):e.width/(a.width*t)}function xt(a,n,e,t,o,i){e===void 0&&(e=0);var s=W(n.naturalWidth,n.naturalHeight,e),c=K(gt(a,n,t),o,i),l=t.height>t.width?t.height/a.height:t.width/a.width,d={x:((s.width-a.width)/2-a.x)*l,y:((s.height-a.height)/2-a.y)*l};return{crop:d,zoom:c}}function De(a,n){return{x:(n.x+a.x)/2,y:(n.y+a.y)/2}}function wt(a){return a*Math.PI/180}function W(a,n,e){var t=wt(e);return{width:Math.abs(Math.cos(t)*a)+Math.abs(Math.sin(t)*n),height:Math.abs(Math.sin(t)*a)+Math.abs(Math.cos(t)*n)}}function K(a,n,e){return Math.min(Math.max(a,n),e)}function $(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return a.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var bt=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,yt=1,Ct=3,jt=1,St=(function(a){ot(n,a);function n(){var e=a!==null&&a.apply(this,arguments)||this;return e.cropperRef=h.createRef(),e.imageRef=h.createRef(),e.videoRef=h.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.previousCropSize=null,e.isInitialized=!1,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var t=!0;e.resizeObserver=new window.ResizeObserver(function(o){if(t){t=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(t){return t.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var t=e.computeSizes();t&&(e.previousCropSize=t,e.emitCropData(),e.setInitialCrop(t),e.isInitialized=!0),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(t){if(e.props.initialCroppedAreaPercentages){var o=vt(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),i=o.crop,s=o.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(s)}else if(e.props.initialCroppedAreaPixels){var c=xt(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),i=c.crop,s=c.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(s)}},e.computeSizes=function(){var t,o,i,s,c,l,d=e.imageRef.current||e.videoRef.current;if(d&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var p=e.containerRect.width/e.containerRect.height,x=((t=e.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((o=e.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,v=((i=e.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=e.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,w=d.offsetWidth<x||d.offsetHeight<v,y=x/v,E=void 0;if(w)switch(e.state.mediaObjectFit){default:case"contain":E=p>y?{width:e.containerRect.height*y,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/y};break;case"horizontal-cover":E={width:e.containerRect.width,height:e.containerRect.width/y};break;case"vertical-cover":E={width:e.containerRect.height*y,height:e.containerRect.height};break}else E={width:d.offsetWidth,height:d.offsetHeight};e.mediaSize=N(N({},E),{naturalWidth:x,naturalHeight:v}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var g=e.props.cropSize?e.props.cropSize:ut(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((c=e.state.cropSize)===null||c===void 0?void 0:c.height)!==g.height||((l=e.state.cropSize)===null||l===void 0?void 0:l.width)!==g.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(g),e.setState({cropSize:g},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(g),g}},e.saveContainerPosition=function(){if(e.containerRef){var t=e.containerRef.getBoundingClientRect();e.containerPosition={x:t.left,y:t.top}}},e.onMouseDown=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(n.getMousePoint(t)))},e.onMouseMove=function(t){return e.onDrag(n.getMousePoint(t))},e.onScroll=function(t){e.currentDoc&&(t.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(t){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(t))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),t.touches.length===2?e.onPinchStart(t):t.touches.length===1&&e.onDragStart(n.getTouchPoint(t.touches[0]))))},e.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?e.onPinchMove(t):t.touches.length===1&&e.onDrag(n.getTouchPoint(t.touches[0]))},e.onGestureStart=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(t){if(t.preventDefault(),!e.isTouching){var o=n.getMousePoint(t),i=e.gestureZoomStart-1+t.scale;if(e.setNewZoom(i,o,{shouldUpdatePosition:!0}),e.props.onRotationChange){var s=e.gestureRotationStart+t.rotation;e.props.onRotationChange(s)}}},e.onGestureEnd=function(t){e.cleanEvents()},e.onDragStart=function(t){var o,i,s=t.x,c=t.y;e.dragStartPosition={x:s,y:c},e.dragStartCrop=N({},e.props.crop),(i=(o=e.props).onInteractionStart)===null||i===void 0||i.call(o)},e.onDrag=function(t){var o=t.x,i=t.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(o===void 0||i===void 0)){var s=o-e.dragStartPosition.x,c=i-e.dragStartPosition.y,l={x:e.dragStartCrop.x+s,y:e.dragStartCrop.y+c},d=e.props.restrictPosition?q(l,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):l;e.props.onCropChange(d)}}))},e.onDragStopped=function(){var t,o;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(o=(t=e.props).onInteractionEnd)===null||o===void 0||o.call(t)},e.onWheel=function(t){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(t))){t.preventDefault();var o=n.getMousePoint(t),i=dt(t).pixelY,s=e.props.zoom-i*e.props.zoomSpeed/200;e.setNewZoom(s,o,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var c,l;return(l=(c=e.props).onInteractionStart)===null||l===void 0?void 0:l.call(c)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var c,l;return(l=(c=e.props).onInteractionEnd)===null||l===void 0?void 0:l.call(c)})},250)}},e.getPointOnContainer=function(t,o){var i=t.x,s=t.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(i-o.x),y:e.containerRect.height/2-(s-o.y)}},e.getPointOnMedia=function(t){var o=t.x,i=t.y,s=e.props,c=s.crop,l=s.zoom;return{x:(o+c.x)/l,y:(i+c.y)/l}},e.setNewZoom=function(t,o,i){var s=i===void 0?{}:i,c=s.shouldUpdatePosition,l=c===void 0?!0:c;if(!(!e.state.cropSize||!e.props.onZoomChange)){var d=K(t,e.props.minZoom,e.props.maxZoom);if(l){var p=e.getPointOnContainer(o,e.containerPosition),x=e.getPointOnMedia(p),v={x:x.x*d-p.x,y:x.y*d-p.y},w=e.props.restrictPosition?q(v,e.mediaSize,e.state.cropSize,d,e.props.rotation):v;e.props.onCropChange(w)}e.props.onZoomChange(d)}},e.getCropData=function(){if(!e.state.cropSize)return null;var t=e.props.restrictPosition?q(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return ht(t,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var t=e.getCropData();if(t){var o=t.croppedAreaPercentages,i=t.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(o,i),e.props.onCropAreaChange&&e.props.onCropAreaChange(o,i)}},e.emitCropAreaChange=function(){var t=e.getCropData();if(t){var o=t.croppedAreaPercentages,i=t.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(o,i)}},e.recomputeCropPosition=function(){if(e.state.cropSize){var t=e.props.crop;if(e.isInitialized&&e.previousCropSize){var o=Math.abs(e.previousCropSize.width-e.state.cropSize.width)>1e-6||Math.abs(e.previousCropSize.height-e.state.cropSize.height)>1e-6;if(o){var i=e.state.cropSize.width/e.previousCropSize.width,s=e.state.cropSize.height/e.previousCropSize.height;t={x:e.props.crop.x*i,y:e.props.crop.y*s}}}var c=e.props.restrictPosition?q(t,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):t;e.previousCropSize=e.state.cropSize,e.props.onCropChange(c),e.emitCropData()}},e.onKeyDown=function(t){var o,i,s=e.props,c=s.crop,l=s.onCropChange,d=s.keyboardStep,p=s.zoom,x=s.rotation,v=d;if(e.state.cropSize){t.shiftKey&&(v*=.2);var w=N({},c);switch(t.key){case"ArrowUp":w.y-=v,t.preventDefault();break;case"ArrowDown":w.y+=v,t.preventDefault();break;case"ArrowLeft":w.x-=v,t.preventDefault();break;case"ArrowRight":w.x+=v,t.preventDefault();break;default:return}e.props.restrictPosition&&(w=q(w,e.mediaSize,e.state.cropSize,p,x)),t.repeat||(i=(o=e.props).onInteractionStart)===null||i===void 0||i.call(o),l(w)}},e.onKeyUp=function(t){var o,i;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault();break;default:return}e.emitCropData(),(i=(o=e.props).onInteractionEnd)===null||i===void 0||i.call(o)},e}return n.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=bt,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},n.prototype.componentWillUnmount=function(){var e,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},n.prototype.componentDidUpdate=function(e){var t,o,i,s,c,l,d,p,x;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((t=e.cropSize)===null||t===void 0?void 0:t.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((i=e.cropSize)===null||i===void 0?void 0:i.width)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.width)?this.computeSizes():(((c=e.crop)===null||c===void 0?void 0:c.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((d=e.crop)===null||d===void 0?void 0:d.y)!==((p=this.props.crop)===null||p===void 0?void 0:p.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((x=this.videoRef.current)===null||x===void 0||x.load());var v=this.getObjectFit();v!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:v},this.computeSizes)},n.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},n.prototype.getObjectFit=function(){var e,t,o,i;if(this.props.objectFit==="cover"){var s=this.imageRef.current||this.videoRef.current;if(s&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,l=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,d=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,p=l/d;return p<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},n.prototype.onPinchStart=function(e){var t=n.getTouchPoint(e.touches[0]),o=n.getTouchPoint(e.touches[1]);this.lastPinchDistance=Ee(t,o),this.lastPinchRotation=Pe(t,o),this.onDragStart(De(t,o))},n.prototype.onPinchMove=function(e){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var o=n.getTouchPoint(e.touches[0]),i=n.getTouchPoint(e.touches[1]),s=De(o,i);this.onDrag(s),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=Ee(o,i),l=t.props.zoom*(c/t.lastPinchDistance);t.setNewZoom(l,s,{shouldUpdatePosition:!1}),t.lastPinchDistance=c;var d=Pe(o,i),p=t.props.rotation+(d-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(p),t.lastPinchRotation=d})}},n.prototype.render=function(){var e=this,t,o=this.props,i=o.image,s=o.video,c=o.mediaProps,l=o.cropperProps,d=o.transform,p=o.crop,x=p.x,v=p.y,w=o.rotation,y=o.zoom,E=o.cropShape,g=o.showGrid,z=o.roundCropAreaPixels,S=o.style,C=S.containerStyle,F=S.cropAreaStyle,O=S.mediaStyle,A=o.classes,G=A.containerClassName,U=A.cropAreaClassName,T=A.mediaClassName,P=(t=this.state.mediaObjectFit)!==null&&t!==void 0?t:this.getObjectFit();return h.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(X){return e.containerRef=X},"data-testid":"container",style:C,className:$("reactEasyCrop_Container",G)},i?h.createElement("img",N({alt:"",className:$("reactEasyCrop_Image",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",T)},c,{src:i,ref:this.imageRef,style:N(N({},O),{transform:d||"translate(".concat(x,"px, ").concat(v,"px) rotate(").concat(w,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):s&&h.createElement("video",N({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:$("reactEasyCrop_Video",P==="contain"&&"reactEasyCrop_Contain",P==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",P==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",T)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:N(N({},O),{transform:d||"translate(".concat(x,"px, ").concat(v,"px) rotate(").concat(w,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(s)?s:[{src:s}]).map(function(I){return h.createElement("source",N({key:I.src},I))})),this.state.cropSize&&h.createElement("div",N({ref:this.cropperRef,style:N(N({},F),{width:z?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:z?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:$("reactEasyCrop_CropArea",E==="round"&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",U)},l)))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Ct,minZoom:yt,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:jt},n.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n})(h.Component);function Nt(a,n){return new Promise((e,t)=>{if(!a||!n)return t(new Error("Missing args"));const o=new Image;o.setAttribute("crossOrigin","anonymous"),o.onload=()=>{const i=document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(o,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.toBlob(c=>{if(!c)return t(new Error("Canvas is empty"));e(c)},"image/png")},o.onerror=i=>t(i),o.src=a})}const Rt=_e({name:L().min(2,"Enter your full name"),email:L().email("Enter a valid email"),phone:L().optional().or(te("")).refine(a=>a===""?!0:/^\+?\d{7,15}$/.test(a),"Phone should be +country and numbers"),organization:L().max(100).optional().or(te("")),bio:L().max(500).optional().or(te(""))}),Et=_e({currentPassword:L().min(6,"Current password required"),newPassword:L().min(8,"At least 8 characters"),confirm:L().min(8,"Confirm new password")}).refine(a=>a.newPassword===a.confirm,{message:"Passwords don't match",path:["confirm"]});function Pt(a){if(!a)return{score:0,label:"Empty"};let n=0;return a.length>=8&&n++,/[A-Z]/.test(a)&&n++,/[a-z]/.test(a)&&n++,/[0-9]/.test(a)&&n++,/[^A-Za-z0-9]/.test(a)&&n++,{score:n,label:["Very weak","Weak","Fair","Good","Strong","Excellent"][n]||"Unknown"}}const Dt=["Overview","Security","Activity","Export"];function Wt(){const a=Ke()||{},{user:n,setUser:e}=a,[t,o]=h.useState(null),[i,s]=h.useState(!0),[c,l]=h.useState(!1),[d,p]=h.useState(null),[x,v]=h.useState(null),[w,y]=h.useState(!1),[E,g]=h.useState({x:0,y:0}),[z,S]=h.useState(1),[C,F]=h.useState(null),[O,A]=h.useState(!1),[G,U]=h.useState(0),[T,P]=h.useState(!1),[I,X]=h.useState(!1),[ce,ze]=h.useState([]),[le,de]=h.useState(!1),[Ae,Me]=h.useState(1),[Fe,Le]=h.useState(!1),[Z,ue]=h.useState("Overview"),D=h.useRef(!0),B=h.useRef([]),{register:H,handleSubmit:Oe,formState:{errors:_,isDirty:_t},reset:J,watch:zt}=ge({resolver:xe(Rt),defaultValues:{name:"",email:"",phone:"",organization:"",bio:""},mode:"onBlur"}),{register:Q,handleSubmit:Te,watch:ke,formState:{errors:k},reset:pe}=ge({resolver:xe(Et),defaultValues:{currentPassword:"",newPassword:"",confirm:""},mode:"onChange"}),We=ke("newPassword","");h.useEffect(()=>{D.current=!0;const u=new AbortController;return B.current.push(u),(async()=>{try{s(!0);const f=await M.get("/users/profile",{signal:u.signal});if(!D.current)return;const m=f.data?.data||f.data;o(m),J({name:m.name||"",email:m.email||"",phone:m.phone||"",organization:m.organization||"",bio:m.bio||""}),P(!!m.twoFaEnabled),m.avatarUrl&&p(m.avatarUrl),ee(1)}catch(f){f?.code==="ERR_CANCELED"||/cancel/i.test(f?.message||"")||(console.error("Failed to load profile",f),R.error(f?.response?.data?.message||"Could not load profile"))}finally{D.current&&s(!1)}})(),()=>{D.current=!1,B.current.forEach(f=>f.abort?.()),B.current=[]}},[]);async function ee(u=1,b=!1){de(!0);const f=new AbortController;B.current.push(f);try{const m=await M.get(`/users/activity?page=${u}&limit=12`,{signal:f.signal});if(!D.current)return;const j=m.data?.data||m.data||[];ze(Ye=>b?[...Ye,...j]:j),Me(u),Le(Array.isArray(j)&&j.length===12)}catch(m){m?.code==="ERR_CANCELED"||/cancel/i.test(m?.message||"")||(console.error("Activity fetch failed",m),R.error("Failed to load activity"))}finally{D.current&&de(!1)}}const Ue=async u=>{l(!0);const b=new AbortController;B.current.push(b);try{const f=await M.put("/users/profile",u,{signal:b.signal}),m=f.data?.data||f.data;if(o(m),typeof e=="function")try{e(j=>({...j||{},...m}))}catch(j){console.warn("setUser error:",j)}J(u),R.success("Profile updated")}catch(f){f?.code==="ERR_CANCELED"||/cancel/i.test(f?.message||"")||(console.error("Save profile error:",f),R.error(f?.response?.data?.message||"Failed to save profile"))}finally{D.current&&l(!1)}},he=Pt(We),Ie=async u=>{l(!0);try{await M.post("/users/change-password",{currentPassword:u.currentPassword,newPassword:u.newPassword}),pe(),R.success("Password changed")}catch(b){console.error("Change password failed",b),R.error(b?.response?.data?.message||"Failed to change password")}finally{D.current&&l(!1)}},me=h.useRef(null),fe=()=>{me.current?.click()},Ze=async u=>{const b=u.target.files?.[0];if(!b)return;const f=new FileReader;f.onload=()=>{p(f.result),y(!0),u.target.value=""},f.readAsDataURL(b)},Be=h.useCallback((u,b)=>{F(b)},[]),He=async()=>{try{const u=await Nt(d,C);v(u),y(!1),await qe(u)}catch(u){console.error("Crop/upload failed",u),R.error("Failed to process image")}},qe=async u=>{A(!0),U(0);try{const b=new FormData;b.append("avatar",u,"avatar.png");const f=await M.post("/users/profile/avatar",b,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:j=>{j.total&&U(Math.round(j.loaded/j.total*100))}}),m=f.data?.data||f.data;p(m.avatarUrl||URL.createObjectURL(u)),o(j=>({...j||{},avatarUrl:m.avatarUrl||j?.avatarUrl})),typeof e=="function"&&e(j=>({...j||{},avatarUrl:m.avatarUrl||j?.avatarUrl})),R.success("Avatar updated")}catch(b){console.error("Upload avatar failed",b),R.error(b?.response?.data?.message||"Failed to upload avatar")}finally{D.current&&(A(!1),U(0))}},Ge=async()=>{X(!0);try{T?(await M.post("/users/2fa/disable"),P(!1),R.success("2FA disabled")):(await M.post("/users/2fa/enable"),P(!0),R.success("2FA enabled"))}catch(u){console.error("2FA toggle failed",u),R.error(u?.response?.data?.message||"Failed to update 2FA")}finally{D.current&&X(!1)}},Xe=async()=>{try{const u=await M.get("/users/profile/export?format=pdf",{responseType:"blob"}),b=new Blob([u.data],{type:"application/pdf"}),f=window.URL.createObjectURL(b),m=document.createElement("a");m.href=f,m.download=`profile-${(t?.name||"profile").replace(/\s+/g,"-")}.pdf`,document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(f),R.success("Profile PDF downloaded")}catch(u){console.error("Export PDF failed",u),R.error(u?.response?.data?.message||"PDF export failed")}},Ve=async()=>{try{await M.post("/auth/logout")}catch{}typeof e=="function"&&e(null)};return i?r.jsxs("div",{className:"flex items-center justify-center h-[70vh]",children:[r.jsx(V,{className:"animate-spin mr-2"})," Loading profile..."]}):r.jsxs("div",{className:"min-h-screen py-10 bg-slate-50 px-4",children:[r.jsx("div",{className:"mx-auto max-w-5xl",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[r.jsxs("div",{className:"flex items-center gap-6 border-b pb-4 mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-100 overflow-hidden flex items-center justify-center",children:d?r.jsx("img",{src:d,alt:"avatar",className:"w-full h-full object-cover"}):r.jsx(ve,{size:34,className:"text-slate-400"})}),r.jsx("button",{className:"absolute -right-1 -bottom-1 p-2 rounded-full bg-white shadow",onClick:fe,"aria-label":"Change avatar",children:r.jsx(we,{size:16})}),r.jsx("input",{ref:me,type:"file",accept:"image/*",className:"hidden",onChange:Ze})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:t?.name||"Unnamed"}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("div",{className:"text-sm text-slate-600",children:t?.email}),r.jsxs("div",{className:"text-sm text-slate-500 inline-flex items-center gap-2",children:[r.jsx(be,{size:14})," ",t?.role||"User"]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("button",{onClick:Ve,className:"px-3 py-2 rounded-md bg-red-50 text-red-600",children:[r.jsx(Je,{size:16})," Logout"]})})]}),r.jsx("div",{className:"mb-6",children:r.jsx("nav",{className:"flex gap-2",children:Dt.map(u=>r.jsx("button",{onClick:()=>ue(u),className:`px-3 py-2 rounded-md text-sm ${Z===u?"bg-blue-600 text-white":"bg-slate-50"}`,children:u},u))})}),r.jsxs("div",{children:[Z==="Overview"&&r.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsxs("form",{onSubmit:Oe(Ue),className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-600 block mb-1",children:"Full name"}),r.jsx("input",{...H("name"),className:"w-full rounded border px-3 py-2 mb-1"}),_.name&&r.jsx("div",{className:"text-xs text-red-600 mb-2",children:_.name.message}),r.jsx("label",{className:"text-sm text-slate-600 block mb-1",children:"Email"}),r.jsx("input",{...H("email"),className:"w-full rounded border px-3 py-2 mb-1"}),_.email&&r.jsx("div",{className:"text-xs text-red-600 mb-2",children:_.email.message}),r.jsx("label",{className:"text-sm text-slate-600 block mb-1",children:"Phone"}),r.jsx("input",{...H("phone"),className:"w-full rounded border px-3 py-2 mb-1"}),_.phone&&r.jsx("div",{className:"text-xs text-red-600 mb-2",children:_.phone.message}),r.jsx("label",{className:"text-sm text-slate-600 block mb-1",children:"Organization"}),r.jsx("input",{...H("organization"),className:"w-full rounded border px-3 py-2 mb-1"}),_.organization&&r.jsx("div",{className:"text-xs text-red-600 mb-2",children:_.organization.message}),r.jsx("label",{className:"text-sm text-slate-600 block mb-1",children:"Bio"}),r.jsx("textarea",{...H("bio"),className:"w-full rounded border px-3 py-2 mb-1",rows:4}),_.bio&&r.jsx("div",{className:"text-xs text-red-600 mb-2",children:_.bio.message}),r.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>J(),className:"px-4 py-2 bg-slate-100 rounded",children:"Revert"}),r.jsxs("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-2",children:[c?r.jsx(V,{className:"animate-spin"}):r.jsx(et,{})," Save changes"]})]})]}),r.jsxs("aside",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Quick info"}),r.jsxs("div",{className:"text-sm text-slate-700",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Joined:"})," ",t?.createdAt?new Date(t.createdAt).toLocaleDateString():"—"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Last login:"})," ",t?.lastLogin?new Date(t.lastLogin).toLocaleString():"—"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Location:"})," ",t?.location||"—"]})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Avatar"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:d?r.jsx("img",{src:d,className:"w-full h-full object-cover",alt:"avatar"}):r.jsx(ve,{size:28})}),r.jsxs("div",{children:[r.jsxs("button",{className:"px-3 py-1 bg-slate-100 rounded",onClick:fe,children:[r.jsx(we,{size:14})," Change"]}),O&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"text-xs text-slate-600",children:["Uploading ",G,"%"]}),r.jsx("div",{className:"h-2 bg-slate-100 rounded mt-1 overflow-hidden",children:r.jsx("div",{style:{width:`${G}%`},className:"h-2 bg-blue-600"})})]})]})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Role overview"}),r.jsx("div",{className:"text-sm text-slate-600",children:t?.bio||"No bio set"})]})]})]})}),Z==="Security"&&r.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Change password"}),r.jsxs("form",{onSubmit:Te(Ie),className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("input",{...Q("currentPassword"),placeholder:"Current password",type:"password",className:"w-full rounded border px-3 py-2"}),k.currentPassword&&r.jsx("div",{className:"text-xs text-red-600",children:k.currentPassword.message})]}),r.jsxs("div",{children:[r.jsx("input",{...Q("newPassword"),placeholder:"New password",type:"password",className:"w-full rounded border px-3 py-2"}),k.newPassword&&r.jsx("div",{className:"text-xs text-red-600",children:k.newPassword.message}),r.jsxs("div",{className:"mt-2 text-xs",children:["Strength: ",r.jsx("strong",{children:he.label})]}),r.jsx("div",{className:"h-2 bg-slate-100 rounded overflow-hidden mt-1",children:r.jsx("div",{style:{width:`${he.score/5*100}%`},className:"h-2 bg-gradient-to-r from-red-500 to-green-500"})})]}),r.jsxs("div",{children:[r.jsx("input",{...Q("confirm"),placeholder:"Confirm new password",type:"password",className:"w-full rounded border px-3 py-2"}),k.confirm&&r.jsx("div",{className:"text-xs text-red-600",children:k.confirm.message})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>pe(),className:"px-3 py-2 bg-slate-100 rounded",children:"Reset"}),r.jsx("button",{type:"submit",className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Change password"})]})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Two-factor authentication"}),r.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Add extra security to your account"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:Ge,className:`px-3 py-2 rounded ${T?"bg-green-600 text-white":"bg-blue-600 text-white"}`,children:[I?r.jsx(V,{className:"animate-spin"}):T?r.jsx(tt,{}):r.jsx(be,{})," ",T?"Enabled":"Enable 2FA"]}),r.jsx("button",{onClick:()=>ue("Overview"),className:"px-3 py-2 bg-slate-100 rounded",children:"Back"})]})]})]})}),Z==="Activity"&&r.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-3",children:"Recent activity"}),le&&r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx(V,{className:"animate-spin inline"})," Loading..."]}),!le&&ce.length===0&&r.jsx("div",{className:"text-sm text-slate-600",children:"No activity"}),r.jsx("ul",{className:"space-y-3 mt-3",children:ce.map(u=>r.jsxs("li",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:u.title||u.type}),r.jsx("div",{className:"text-xs text-slate-500",children:u.description||u.detail})]}),r.jsx("div",{className:"text-xs text-slate-400",children:u.ts?new Date(u.ts).toLocaleString():""})]},u._id||`${u.type}-${u.ts}`))}),r.jsx("div",{className:"mt-4 flex gap-2 justify-center",children:Fe?r.jsx("button",{onClick:()=>ee(Ae+1,!0),className:"px-3 py-2 bg-blue-600 rounded text-white",children:"Load more"}):r.jsx("button",{onClick:()=>ee(1),className:"px-3 py-2 bg-slate-100 rounded",children:"Refresh"})})]})}),Z==="Export"&&r.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Export profile"}),r.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Download a PDF copy of your public profile."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Xe,className:"px-3 py-2 bg-blue-600 text-white rounded inline-flex items-center gap-2",children:[r.jsx(rt,{})," Download PDF"]}),r.jsx("button",{onClick:()=>R("CSV export server-side not implemented"),className:"px-3 py-2 bg-slate-100 rounded",children:"Export CSV"})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Danger zone"}),r.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Delete account or revoke sessions (server action required)."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>R.error("Protected action: implement backend endpoint"),className:"px-3 py-2 bg-red-600 text-white rounded",children:"Delete account"}),r.jsx("button",{onClick:()=>R("Sessions revoked (UI only)"),className:"px-3 py-2 bg-slate-100 rounded",children:"Revoke sessions"})]})]})]})})]})]})}),w&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"bg-white rounded-lg p-4 w-[90%] max-w-3xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h3",{className:"text-lg",children:"Crop avatar"}),r.jsx("button",{onClick:()=>y(!1),className:"p-1",children:r.jsx(Qe,{})})]}),r.jsx("div",{className:"relative w-full h-[420px] bg-gray-100",children:r.jsx(St,{image:d,crop:E,zoom:z,aspect:1,onCropChange:g,onZoomChange:S,onCropComplete:Be})}),r.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[r.jsx("input",{type:"range",min:1,max:3,step:.01,value:z,onChange:u=>S(Number(u.target.value))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(!1),className:"px-3 py-2 bg-slate-100 rounded",children:"Cancel"}),r.jsx("button",{onClick:He,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Use & Upload"})]})]})]})})]})}export{Wt as default};
