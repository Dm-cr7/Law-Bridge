import{j as e,L as v,B as u,F as k,r as i,u as S,d as A}from"./index-f8gYbhCl.js";import{a as N}from"./axiosInstance-CMvw4fUn.js";import{C as y,a as F,b as L,c as E}from"./Card-RIMQGzKH.js";import{B as D,C}from"./Badge-DCfLUgYb.js";import{G as H}from"./gavel-COFU8h8H.js";import{U as w}from"./user-CmGx6MMi.js";import{C as I}from"./calendar-l8FpB4bB.js";import{C as R}from"./clock-CKoIW5G7.js";import{C as U}from"./circle-check-big-C9dl78oh.js";import{D as B}from"./download-prd_qkFN.js";import{I as $}from"./Input-syE1joBH.js";import{S as z,a as P,c as _,d as p}from"./Select-6yFAnhOQ.js";import"./use-toast-BuzuOw6m.js";import{F as T}from"./funnel-CKFm5fto.js";import{R as G}from"./refresh-ccw-ClALOjYv.js";import"./chevron-down-YkxUddiE.js";function J({arbitration:d,compact:m=!1,onJoinHearing:x,onDownloadAward:n}){if(!d)return null;const{_id:r,title:l,claimant:c,respondent:j,arbitrator:t,status:f,createdAt:b,hearingStatus:o,awardPdf:h}=d,g=s=>{switch(s){case"pending":return"warning";case"in-progress":return"default";case"decided":return"success";case"closed":return"secondary";default:return"outline"}};return e.jsxs(y,{className:`transition-all hover:shadow-lg ${m?"p-2":"p-4"} border border-black-200`,children:[e.jsx(F,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(L,{className:"text-base font-semibold text-black-800",children:[e.jsx(H,{className:"inline h-4 w-4 mr-1 text-black-500"}),l||"Untitled Arbitration"]}),e.jsx(D,{variant:g(f),className:"capitalize",children:f||"pending"})]})}),e.jsxs(E,{className:"text-sm text-black-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx(w,{className:"inline h-3 w-3 mr-1 text-black-400"}),e.jsx("strong",{children:"Claimant:"})," ",c?.name||"—"]}),e.jsxs("p",{children:[e.jsx(w,{className:"inline h-3 w-3 mr-1 text-black-400"}),e.jsx("strong",{children:"Respondent:"})," ",j?.name||"—"]}),e.jsxs("p",{children:[e.jsx(w,{className:"inline h-3 w-3 mr-1 text-black-400"}),e.jsx("strong",{children:"Arbitrator:"})," ",t?.name||"Unassigned"]}),e.jsxs("p",{className:"text-black-500 text-xs flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),new Date(b).toLocaleDateString()]}),o&&e.jsx("p",{className:"text-xs flex items-center gap-1 mt-1",children:o==="active"?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-3 w-3 text-green-500"})," Hearing in Session"]}):o==="scheduled"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-3 w-3 text-blue-500"})," Hearing Scheduled"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-3 w-3 text-black-400"})," No Active Hearing"]})}),e.jsxs("div",{className:`flex ${m?"flex-row gap-2 mt-2":"flex-wrap gap-3 mt-3"}`,children:[e.jsx(v,{to:`/arbitrations/${r}`,children:e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(k,{className:"h-4 w-4 mr-1"})," View"]})}),o==="active"&&e.jsxs(u,{variant:"default",size:"sm",onClick:()=>x&&x(r),children:[e.jsx(C,{className:"h-4 w-4 mr-1"})," Join Hearing"]}),h&&e.jsxs(u,{variant:"secondary",size:"sm",onClick:()=>n?n(h):window.open(h,"_blank"),children:[e.jsx(B,{className:"h-4 w-4 mr-1"})," Award"]})]})]})]},r)}function ne(){const[d,m]=i.useState([]),[x,n]=i.useState([]),[r,l]=i.useState(!0),[c,j]=i.useState(""),[t,f]=i.useState("all"),b=S();i.useEffect(()=>{(async()=>{try{l(!0);const{data:a}=await N.get("/api/arbitrations");a?.success?(m(a.arbitrations||[]),n(a.arbitrations||[])):toast({title:"Error",description:"Failed to load arbitrations."})}catch(a){console.error(a),toast({title:"Server Error",description:a?.response?.data?.message||"Unable to fetch arbitrations."})}finally{l(!1)}})()},[]),i.useEffect(()=>{let s=[...d];c.trim()&&(s=s.filter(a=>a.title?.toLowerCase().includes(c.toLowerCase()))),t!=="all"&&(s=s.filter(a=>a.status===t)),n(s)},[c,t,d]);const o=s=>b(`/arbitrations/${s}/hearing`),h=s=>window.open(s,"_blank"),g=async()=>{l(!0);try{const{data:s}=await N.get("/api/arbitrations");m(s.arbitrations||[]),n(s.arbitrations||[]),toast({title:"List updated",description:"Arbitrations refreshed."})}catch{toast({title:"Error",description:"Failed to refresh arbitration list."})}finally{l(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[e.jsxs("h1",{className:"text-2xl font-bold text-black-800 flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-black-600"}),"Arbitration Cases"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx($,{placeholder:"Search arbitrations...",value:c,onChange:s=>j(s.target.value),className:"w-64"}),e.jsxs(z,{value:t,onValueChange:f,children:[e.jsx(P,{className:"w-40",children:t==="all"?"All statuses":t.charAt(0).toUpperCase()+t.slice(1)}),e.jsxs(_,{children:[e.jsx(p,{value:"all",children:"All"}),e.jsx(p,{value:"pending",children:"Pending"}),e.jsx(p,{value:"in-progress",children:"In Progress"}),e.jsx(p,{value:"decided",children:"Decided"}),e.jsx(p,{value:"closed",children:"Closed"})]})]}),e.jsxs(u,{variant:"outline",onClick:g,disabled:r,children:[e.jsx(G,{className:`h-4 w-4 mr-1 ${r?"animate-spin":""}`}),"Refresh"]})]})]}),r?e.jsxs("div",{className:"flex justify-center items-center h-60 text-black-500",children:[e.jsx(A,{className:"animate-spin h-6 w-6 mr-2"}),"Loading arbitrations..."]}):x.length===0?e.jsx("div",{className:"text-center text-black-500 py-20",children:e.jsx("p",{children:"No arbitrations found."})}):e.jsx("div",{className:"grid gap-4",children:x.map(s=>e.jsx(J,{arbitration:s,onJoinHearing:o,onDownloadAward:h},s._id))})]})}export{ne as default};
